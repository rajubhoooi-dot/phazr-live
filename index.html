<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>PHAZR</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <style>
    * { margin:0; padding:0; box-sizing:border-box; }
    body { font-family: system-ui, sans-serif; background:#fafafa; }

    header {
      background:#fff; padding:12px 15px; text-align:left;
      border-bottom:1px solid #eee; position:sticky; top:0; z-index:99;
      box-shadow:0 2px 8px rgba(0,0,0,.05);
    }
    .live-count {
      font-size:14px; font-weight:700; color:#d32f2f;
      display:flex; align-items:center; gap:6px;
    }
    .live-count i { color:#4caf50; font-size:14px; animation:pulse 1.5s infinite; }
    @keyframes pulse { 0%,100% {transform:scale(1)} 50% {transform:scale(1.3)} }

    main#feed { padding:1rem; max-width:680px; margin:0 auto; }
    .post {
      background:#fff; border-radius:12px; overflow:hidden; margin-bottom:1.2rem;
      box-shadow:0 2px 8px rgba(0,0,0,0.08);
    }
    .post img { width:100%; height:auto; display:block; }
    .post-content { padding:0.8rem; }
    .post p { font-size:0.9rem; margin-bottom:0.5rem; }
    .post a { color:#00d4ff; text-decoration:none; }
    .post .blog-name { font-weight:600; color:#000; font-size:0.85rem; margin-bottom:0.3rem; }
    .post .caption { color:#000; font-weight:600; font-size:0.85rem; margin-top:0.5rem; }

    /* HIDE HASHTAGS */
    .post .tags { display:none; }

    /* LIKE BUTTON */
    .like-btn {
      font-size:20px; color:#ccc; cursor:pointer; transition:0.2s;
      margin-right:12px;
    }
    .like-btn.liked {
      color:#e0245e; animation: heartBeat 0.5s;
    }
    @keyframes heartBeat {
      0% { transform:scale(1); }
      50% { transform:scale(1.4); }
      100% { transform:scale(1); }
    }
    .post-actions {
      display:flex; align-items:center; padding:0 0.8rem 0.8rem;
    }

    .sidebar {
      position:fixed; top:0; left:-250px; width:250px; height:100vh;
      background:#fff; box-shadow:2px 0 10px rgba(0,0,0,.1);
      transition:left .3s ease; z-index:999; padding:70px 15px 20px; overflow-y:auto;
    }
    .sidebar.visible { left:0; }
    .sidebar h3 { margin:0 0 12px; font-size:17px; color:#333; text-align:center; }
    .sidebar a {
      display:block; padding:7px 10px; color:#d32f2f; text-decoration:none;
      font-size:13px; border-radius:5px; margin:2px 0; transition:background .2s;
    }
    .sidebar a:hover { background:#f5f5f5; }
    .sidebar .close-sidebar {
      position:absolute; top:15px; right:15px; background:none; border:none;
      font-size:22px; cursor:pointer; color:#999;
    }

    footer {
      position:fixed; bottom:0; left:0; right:0; background:#fff;
      border-top:1px solid #eee; display:flex; justify-content:space-between;
      align-items:center; padding:8px 15px; z-index:100;
      box-shadow:0 -2px 8px rgba(0,0,0,.05);
    }
    .footer-left a, .footer-right i { font-size:22px; color:#d32f2f; }
    .search-container {
      flex:1; display:flex; justify-content:center; align-items:center;
    }
    .search-bar {
      position:relative; width:100%; max-width:220px;
    }
    .search-bar i {
      position:absolute; left:12px; top:50%; transform:translateY(-50%);
      color:#999; font-size:14px;
    }
    .search-bar input {
      width:100%; padding:9px 10px 9px 36px; border:1px solid #ddd;
      border-radius:8px; font-size:14px; outline:none;
      text-align:center;
    }
    .search-bar input::placeholder { text-align:center; opacity:0.7; }
    .search-bar input:focus { border-color:#d32f2f; }

    @media (max-width:768px) {
      .sidebar { width:200px; }
      .search-bar { max-width:160px; }
    }
  </style>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">

</head>
<body>

<header>
  <div class="live-count">
    <i class="fas fa-circle"></i>
    <span id="liveCount">1,234</span> online
  </div>
</header>

<main id="feed"></main>

<div class="sidebar" id="sidebar">
  <button class="close-sidebar" id="closeSidebar">X</button>
  <h3>Popular Blogs</h3>
  <div id="blogLinks"></div>
</div>

<footer>
  <div class="footer-left">
    <a href="bloglist.html"><i class="far fa-heart"></i></a>
  </div>
  <div class="search-container">
    <div class="search-bar">
      <i class="fas fa-search"></i>
      <input type="text" placeholder="Blog or #tag" id="searchInput">
    </div>
  </div>
  <div class="footer-right">
    <i class="fas fa-bars" id="menuBtn"></i>
  </div>
</footer>

<script src="js/tumblr-feed.js"></script>
<script>
  // LIVE COUNT
  const liveCountEl = document.getElementById('liveCount');
  let count = localStorage.getItem('live_count') || Math.floor(Math.random() * 800) + 400;
  function updateLiveCount() {
    count = parseInt(count) + Math.floor(Math.random() * 4) + 1;
    liveCountEl.textContent = count.toLocaleString();
    localStorage.setItem('live_count', count);
  }
  updateLiveCount();
  setInterval(updateLiveCount, 10000);

  // SIDEBAR
  const sidebar = document.getElementById('sidebar');
  const menuBtn = document.getElementById('menuBtn');
  const closeBtn = document.getElementById('closeSidebar');

  menuBtn.addEventListener('click', (e) => {
    e.stopPropagation();
    sidebar.classList.add('visible');
  });

  closeBtn.addEventListener('click', () => {
    sidebar.classList.remove('visible');
  });

  document.addEventListener('click', (e) => {
    if (sidebar.classList.contains('visible') && 
        !sidebar.contains(e.target) && 
        e.target !== menuBtn) {
      sidebar.classList.remove('visible');
    }
  });

  // SEARCH
  document.getElementById('searchInput').addEventListener('keypress', (e) => {
    if (e.key === 'Enter') {
      const q = e.target.value.trim();
      if (q) {
        window.loadPosts(q.startsWith('#') ? null : q, q.startsWith('#') ? q.slice(1) : null);
        e.target.value = '';
      }
    }
  });
</script>
</body>
</html>
